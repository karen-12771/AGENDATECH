<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      defer
    ></script>
    <title>Agendatech</title>
    <link rel="icon" href="src/img/favicon.ico" type="image/x-icon" />
    <style>
      /* Aqu√≠ puedes poner estilos adicionales o mantener styles.css */
      /* Para asegurar que el formulario tenga overlay */
      body.modal-open {
        overflow: hidden;
      }
    </style>
  </head>

  <body>
    <!-- ======= HEADER ======= -->
    <header class="site-header d-flex justify-content-between align-items-center p-3 border-bottom">
      <a href="/" class="site-logo d-flex align-items-center gap-2">
        <img src="src/img/womanLogo.png" alt="Logo mujer" class="logo-img" style="height:40px;" />
        <img src="src/img/bellezaLogo.png" alt="Logo belleza" class="slogan-img" style="height:40px;" />
      </a>
      <nav id="menu" class="menu">
        <ul class="list-unstyled d-flex gap-3 mb-0 align-items-center">
          <li><a href="#" class="text-decoration-none">Ag√©ndate</a></li>
          <li><a href="#" class="text-decoration-none">Productos</a></li>
          <li><a href="#" class="text-decoration-none">Mi cuenta</a></li>
          <li>
            <a href="#"><img src="src/img/shoppingCart.png" alt="Carrito" style="height:24px;" /></a>
          </li>
          <li>
            <button id="openLoginBtn" class="btn btn-sm btn-outline-warning">Iniciar sesi√≥n</button>
          </li>
        </ul>
      </nav>
    </header>

    <!-- ======= CARRUSEL ======= -->
    <div class="custom-carousel-container my-4 container">
      <div
        id="carouselExampleIndicators"
        class="carousel slide"
        data-bs-ride="carousel"
      >
        <div class="carousel-inner rounded">
          <div class="carousel-item active">
            <img
              src="src/img/slide1.png"
              class="d-block w-100"
              alt="Slide 1"
              style="max-height: 400px; object-fit: cover;"
            />
          </div>
          <div class="carousel-item">
            <img
              src="src/img/slide2.png"
              class="d-block w-100"
              alt="Slide 2"
              style="max-height: 400px; object-fit: cover;"
            />
          </div>
          <div class="carousel-item">
            <img
              src="src/img/slide3.png"
              class="d-block w-100"
              alt="Slide 3"
              style="max-height: 400px; object-fit: cover;"
            />
          </div>
        </div>
        <button
          class="carousel-control-prev"
          type="button"
          data-bs-target="#carouselExampleIndicators"
          data-bs-slide="prev"
        >
          <span class="carousel-control-prev-icon"></span>
          <span class="visually-hidden">Anterior</span>
        </button>
        <button
          class="carousel-control-next"
          type="button"
          data-bs-target="#carouselExampleIndicators"
          data-bs-slide="next"
        >
          <span class="carousel-control-next-icon"></span>
          <span class="visually-hidden">Siguiente</span>
        </button>
      </div>
    </div>

    <!-- ======= FORMULARIO DE INICIO DE SESI√ìN DIN√ÅMICO ======= -->
    <script>
      // Crear estilos din√°micos para el formulario login
      const style = document.createElement("style");
      style.textContent = `
        .login-container {
          max-width: 400px;
          background-color: #f7f7f7;
          border-radius: 12px;
          box-shadow: 0 0 15px rgba(0,0,0,0.1);
          padding: 30px;
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          z-index: 1050;
          display: none;
        }
        .login-container.show {
          display: block;
          animation: fadeIn 0.3s ease forwards;
        }
        @keyframes fadeIn {
          from {opacity: 0; transform: translate(-50%, -60%)}
          to {opacity: 1; transform: translate(-50%, -50%)}
        }
        .form-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 10px;
        }
        .close-btn {
          cursor: pointer;
          font-size: 24px;
          color: #a45a19;
          border: none;
          background: none;
          line-height: 1;
        }
        label {
          display: block;
          margin-top: 15px;
          margin-bottom: 5px;
          font-weight: 600;
          color: #333;
        }
        input[type="email"],
        input[type="password"] {
          width: 100%;
          padding: 10px;
          border: 2px solid #a45a19;
          border-radius: 8px;
          box-sizing: border-box;
          font-size: 14px;
        }
        .password-wrapper {
          position: relative;
        }
        .toggle-password {
          position: absolute;
          right: 10px;
          top: 50%;
          transform: translateY(-50%);
          cursor: pointer;
          color: #a45a19;
          font-size: 18px;
          user-select: none;
        }
        .checkbox-wrapper {
          margin-top: 15px;
          display: flex;
          align-items: center;
          gap: 6px;
        }
        .login-btn {
          margin-top: 20px;
          width: 100%;
          background-color: #a45a19;
          color: white;
          border: none;
          padding: 12px;
          border-radius: 8px;
          font-weight: bold;
          font-size: 16px;
          cursor: pointer;
          transition: background 0.3s ease;
        }
        .login-btn:hover {
          background-color: #8a4713;
        }
        .links {
          text-align: center;
          margin-top: 15px;
        }
        .links a {
          color: #4a4a4a;
          text-decoration: none;
          font-size: 14px;
        }
        .links a:hover {
          text-decoration: underline;
        }
        /* Overlay para oscurecer el fondo */
        .overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background: rgba(0, 0, 0, 0.4);
          z-index: 1040;
          display: none;
        }
        .overlay.show {
          display: block;
          animation: fadeInOverlay 0.3s ease forwards;
        }
        @keyframes fadeInOverlay {
          from {opacity: 0;}
          to {opacity: 1;}
        }
      `;
      document.head.appendChild(style);

      // Crear overlay
      const overlay = document.createElement("div");
      overlay.className = "overlay";
      document.body.appendChild(overlay);

      // Crear contenedor login
      const container = document.createElement("div");
      container.className = "login-container";
      container.id = "loginContainer";

      // Crear formulario
      const form = document.createElement("form");
      form.id = "loginForm";

      // Encabezado del formulario
      const header = document.createElement("div");
      header.className = "form-header";
      header.innerHTML =
        `<h3>Iniciar Sesi√≥n</h3>` +
        `<button type="button" class="close-btn" aria-label="Cerrar" title="Cerrar">&times;</button>`;
      form.appendChild(header);

      // Email
      const emailLabel = document.createElement("label");
      emailLabel.setAttribute("for", "email");
      emailLabel.textContent = "Correo Electr√≥nico";
      const emailInput = document.createElement("input");
      emailInput.type = "email";
      emailInput.placeholder = "Correo Electr√≥nico";
      emailInput.id = "email";
      emailInput.required = true;
      form.appendChild(emailLabel);
      form.appendChild(emailInput);

      // Contrase√±a
      const passLabel = document.createElement("label");
      passLabel.setAttribute("for", "password");
      passLabel.textContent = "Contrase√±a";
      const passWrapper = document.createElement("div");
      passWrapper.className = "password-wrapper";

      const passInput = document.createElement("input");
      passInput.type = "password";
      passInput.placeholder = "Contrase√±a";
      passInput.id = "password";
      passInput.required = true;

      const toggleBtn = document.createElement("span");
      toggleBtn.className = "toggle-password";
      toggleBtn.textContent = "üëÅÔ∏è";
      toggleBtn.setAttribute("role", "button");
      toggleBtn.setAttribute("tabindex", "0");
      toggleBtn.addEventListener("click", () => {
        if (passInput.type === "password") {
          passInput.type = "text";
          toggleBtn.textContent = "üôà";
        } else {
          passInput.type = "password";
          toggleBtn.textContent = "üëÅÔ∏è";
        }
      });
      passWrapper.appendChild(passInput);
      passWrapper.appendChild(toggleBtn);

      form.appendChild(passLabel);
      form.appendChild(passWrapper);

      // Checkbox recordar
      const checkboxWrapper = document.createElement("div");
      checkboxWrapper.className = "checkbox-wrapper";

      const rememberCheck = document.createElement("input");
      rememberCheck.type = "checkbox";
      rememberCheck.id = "rememberMe";

      const rememberLabel = document.createElement("label");
      rememberLabel.setAttribute("for", "rememberMe");
      rememberLabel.textContent = "Recu√©rdame";

      checkboxWrapper.appendChild(rememberCheck);
      checkboxWrapper.appendChild(rememberLabel);
      form.appendChild(checkboxWrapper);

      // Bot√≥n login
      const loginBtn = document.createElement("button");
      loginBtn.type = "submit";
      loginBtn.className = "login-btn";
      loginBtn.textContent = "Acceder";
      form.appendChild(loginBtn);

      // Links adicionales
      const linksDiv = document.createElement("div");
      linksDiv.className = "links";
      linksDiv.innerHTML = `
        <a href="#">Olvid√© mi contrase√±a</a><br />
        <a href="#">Registrarme</a>
      `;
      form.appendChild(linksDiv);

      container.appendChild(form);
      document.body.appendChild(container);

      // Funciones para mostrar y ocultar login
      const openLoginBtn = document.getElementById("openLoginBtn");
      const loginContainer = document.getElementById("loginContainer");
      const closeBtn = form.querySelector(".close-btn");

      function abrirLogin() {
        loginContainer.classList.add("show");
        overlay.classList.add("show");
        document.body.classList.add("modal-open");
        // Limpiar campos al abrir
        form.reset();
        passInput.type = "password";
        toggleBtn.textContent = "üëÅÔ∏è";
      }

      function cerrarLogin() {
        loginContainer.classList.remove("show");
        overlay.classList.remove("show");
        document.body.classList.remove("modal-open");
      }

      openLoginBtn.addEventListener("click", abrirLogin);
      closeBtn.addEventListener("click", cerrarLogin);
      overlay.addEventListener("click", cerrarLogin);

      // Validaci√≥n simple del formulario
      form.addEventListener("submit", function (e) {
        e.preventDefault();

        const email = emailInput.value.trim();
        const password = passInput.value.trim();

        if (!email || !password) {
          alert("Por favor, completa todos los campos.");
          return;
        }

        // Validar formato b√°sico de email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          alert("Por favor, ingresa un correo electr√≥nico v√°lido.");
          return;
        }

        if (password.length < 4) {
          alert("La contrase√±a debe tener al menos 4 caracteres.");
          return;
        }

        // Aqu√≠ podr√≠as hacer la llamada al backend o autenticaci√≥n
        alert(`¬°Bienvenido! Has iniciado sesi√≥n con: ${email}`);

        cerrarLogin();
      });
    </script>
  </body>
</html>
